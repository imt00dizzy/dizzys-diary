<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>@dizzy</title>
<link rel="icon" href="jaydes.jpeg" type="image/jpeg">

<style>
*{margin:0;padding:0;box-sizing:border-box}

:root {
  --primary: #8b5cf6;
  --primary-dark: #7c3aed;
  --bg: #000;
  --card-bg: #111018;
  --section-bg: #0e0d14;
  --border: #2b2740;
  --text: #fff;
  --text-secondary: #a1a1b5;
  --text-muted: #8f8aa8;
}

body{
font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Arial,sans-serif;
background:var(--bg);
color:var(--text);
min-height:100vh;
display:flex;
justify-content:center;
align-items:center;
overflow:hidden;
position:relative;
}

/* Particles container */
#particles {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 1;
}

#enter-screen{
position:fixed;
inset:0;
background:#000;
display:flex;
flex-direction:column;
align-items:center;
justify-content:center;
z-index:999;
cursor:pointer;
transition:opacity .6s ease,visibility .6s ease;
backdrop-filter: blur(4px);
}

#enter-screen.hidden{
opacity:0;
visibility:hidden;
pointer-events:none;
}

#enter-text{
font-size:13px;
letter-spacing:1px;
color:var(--text-secondary);
text-transform:lowercase;
margin-bottom:20px;
transition:transform 0.3s ease;
}

#enter-text:hover {
  transform: translateY(-2px);
}

.enter-hint {
  font-size: 11px;
  color: var(--text-muted);
  margin-top: 10px;
  opacity: 0.7;
}

.card{
background:var(--card-bg);
border-radius:20px;
padding:60px 40px 50px;
max-width:380px;
width:100%;
text-align:center;
box-shadow:0 0 0 1px rgba(139,92,246,.08),0 20px 40px rgba(0,0,0,.6);
z-index:2;
position:relative;
backdrop-filter: blur(10px);
border: 1px solid rgba(139, 92, 246, 0.1);
transition: transform 0.3s ease;
}

.card:hover {
  transform: translateY(-5px);
}

.avatar{
width:110px;
height:110px;
border-radius:50%;
margin:0 auto 24px;
overflow:hidden;
border:3px solid var(--border);
position:relative;
transition: border-color 0.3s ease, transform 0.3s ease;
}

.avatar:hover {
  border-color: var(--primary);
  transform: scale(1.05);
}

.avatar img{
width:100%;
height:100%;
object-fit:cover;
}

.username{
font-size:28px;
font-weight:600;
margin-bottom:28px;
background: linear-gradient(45deg, var(--primary), #c4b5fd);
-webkit-background-clip: text;
-webkit-text-fill-color: transparent;
background-clip: text;
}

.section{
background:var(--section-bg);
border:1px solid var(--border);
border-radius:12px;
padding:14px;
display:flex;
gap:12px;
align-items:center;
cursor:pointer;
transition: all 0.3s ease;
position:relative;
overflow:hidden;
}

.section::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(139, 92, 246, 0.1), transparent);
  transition: left 0.6s ease;
}

.section:hover::before {
  left: 100%;
}

.section:hover{
border-color:var(--primary);
transform: translateY(-2px);
box-shadow: 0 5px 15px rgba(139, 92, 246, 0.2);
}

.section img{
width:56px;
height:56px;
border-radius:6px;
object-fit:cover;
background:var(--border);
transition: transform 0.3s ease;
}

.section:hover img {
  transform: scale(1.05);
}

.info{
flex:1;
text-align:left;
overflow:hidden;
}

.label{
font-size:11px;
color:var(--text-muted);
margin-bottom:6px;
text-transform:lowercase;
letter-spacing:0.5px;
}

.title{
font-size:14px;
font-weight:500;
white-space: nowrap;
overflow: hidden;
text-overflow: ellipsis;
}

.artist{
font-size:12px;
color:var(--text-secondary);
opacity:.75;
white-space: nowrap;
overflow: hidden;
text-overflow: ellipsis;
}

.socials{
display:flex;
justify-content:center;
gap:22px;
margin-top:30px;
}

.socials a{
width:44px;
height:44px;
border-radius:12px;
display:flex;
align-items:center;
justify-content:center;
position:relative;
transition:.2s;
background:var(--section-bg);
border:1px solid var(--border);
text-decoration:none;
overflow:hidden;
}

.socials a::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: var(--primary);
  opacity: 0;
  transition: opacity 0.3s ease;
}

.socials a:hover{
transform:translateY(-4px) scale(1.1);
border-color:var(--primary);
box-shadow: 0 5px 15px rgba(139, 92, 246, 0.3);
}

.socials a:hover::after {
  opacity: 0.1;
}

.socials img{
width:22px;
height:22px;
object-fit:contain;
z-index: 1;
position: relative;
}

.link-icon{
position:absolute;
bottom:6px;
right:6px;
width:10px;
height:10px;
opacity:.6;
z-index: 2;
}

/* Fixed sciencerules.webp duplication - removed from discord link */
.socials a:first-child .link-icon {
  display: none;
}

#site-player{
position:fixed;
bottom:22px;
right:22px;
background:linear-gradient(135deg, var(--section-bg), #141225);
border:1px solid rgba(139,92,246,.25);
border-radius:14px;
padding:12px 14px;
display:flex;
gap:10px;
align-items:center;
box-shadow:0 10px 30px rgba(0,0,0,.6);
z-index:3;
cursor:pointer;
transition: all 0.3s ease;
backdrop-filter: blur(10px);
}

#site-player:hover {
  transform: translateY(-3px);
  border-color: var(--primary);
  box-shadow: 0 15px 35px rgba(139, 92, 246, 0.3);
}

#site-player img{
width:44px;
height:44px;
border-radius:8px;
object-fit:cover;
transition: transform 0.3s ease;
position: relative;
}

#site-player:hover img {
  transform: scale(1.1);
}

#site-player .meta{
display:flex;
flex-direction:column;
gap:2px;
min-width: 140px;
position: relative;
}

#site-player .now{
font-size:10px;
letter-spacing:.5px;
color:var(--primary);
text-transform:lowercase;
font-weight: 500;
}

#site-player .song{
font-size:13px;
font-weight:500;
white-space: nowrap;
overflow: hidden;
text-overflow: ellipsis;
}

#site-player .by{
font-size:11px;
color:var(--text-secondary);
opacity:.8;
}

/* Loop indicator */
.loop-indicator {
  position: absolute;
  top: -8px;
  right: -8px;
  background: var(--primary);
  color: white;
  font-size: 9px;
  padding: 2px 4px;
  border-radius: 4px;
  opacity: 0;
  transform: scale(0.8);
  transition: all 0.3s ease;
  pointer-events: none;
  z-index: 4;
}

.loop-indicator.show {
  animation: loopPulse 0.5s ease;
}

@keyframes loopPulse {
  0% {
    opacity: 0;
    transform: scale(0.8);
  }
  50% {
    opacity: 1;
    transform: scale(1.1);
  }
  100% {
    opacity: 0;
    transform: scale(0.8);
  }
}

/* Volume slider */
.volume-container {
  position: fixed;
  bottom: 22px;
  left: 22px;
  background: var(--section-bg);
  border: 1px solid var(--border);
  border-radius: 14px;
  padding: 10px 15px;
  z-index: 3;
  backdrop-filter: blur(10px);
  display: flex;
  align-items: center;
  gap: 10px;
}

.volume-slider {
  -webkit-appearance: none;
  width: 80px;
  height: 4px;
  border-radius: 2px;
  background: var(--border);
  outline: none;
}

.volume-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 12px;
  height: 12px;
  border-radius: 50%;
  background: var(--primary);
  cursor: pointer;
}

.volume-icon {
  width: 16px;
  height: 16px;
  opacity: 0.7;
}

/* Playback controls */
.playback-controls {
  position: fixed;
  bottom: 22px;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  gap: 10px;
  background: var(--section-bg);
  border: 1px solid var(--border);
  border-radius: 14px;
  padding: 8px 12px;
  z-index: 3;
  backdrop-filter: blur(10px);
}

.control-btn {
  background: none;
  border: none;
  color: var(--text-secondary);
  width: 32px;
  height: 32px;
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.3s ease;
}

.control-btn:hover {
  background: rgba(139, 92, 246, 0.1);
  color: var(--primary);
  transform: translateY(-2px);
}

.control-btn.active {
  color: var(--primary);
  background: rgba(139, 92, 246, 0.2);
}

/* Progress bar */
.progress-container {
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 3px;
  background: rgba(139, 92, 246, 0.1);
  border-radius: 0 0 14px 14px;
  overflow: hidden;
}

.progress-bar {
  height: 100%;
  background: var(--primary);
  width: 0%;
  transition: width 0.1s linear;
}

/* Responsive */
@media (max-width: 768px) {
  .card {
    margin: 20px;
    padding: 40px 20px 30px;
  }
  
  #site-player {
    bottom: 100px;
    right: 20px;
    left: 20px;
    justify-content: center;
  }
  
  .playback-controls {
    bottom: 60px;
  }
  
  .volume-container {
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
  }
}

/* Loading animation */
.loading {
  opacity: 0.5;
  pointer-events: none;
}

.pulse {
  animation: pulse 1.5s infinite;
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

/* Loop badge on player */
#site-player::after {
  content: '∞';
  position: absolute;
  top: -6px;
  right: -6px;
  background: var(--primary);
  color: white;
  font-size: 10px;
  width: 16px;
  height: 16px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0.8;
}

/* Typewriter cursor for tab title */
.typewriter-cursor {
  display: inline-block;
  width: 3px;
  background-color: var(--primary);
  margin-left: 2px;
  animation: blink 1s infinite;
}

@keyframes blink {
  0%, 100% { opacity: 1; }
  50% { opacity: 0; }
}
</style>
</head>

<body>

<div id="particles"></div>

<div id="enter-screen">
<div id="enter-text">click to enter</div>
<div class="enter-hint">music will start playing (looped)</div>
</div>

<audio id="site-audio" src="gohomebyjaydes.mp3" loop></audio>

<div class="card">

<div class="avatar">
<img src="https://i.pinimg.com/736x/83/8b/90/838b90c701145ff38b424dbf9dd0057d.jpg">
</div>

<div class="username">dizzy</div>

<div id="lastfm" class="section">
<img id="lfm-art" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='56' height='56' viewBox='0 0 56 56'%3E%3Crect width='56' height='56' fill='%232b2740'/%3E%3C/svg%3E">
<div class="info">
<div id="lfm-label" class="label pulse">connecting...</div>
<div id="lfm-title" class="title">—</div>
<div id="lfm-artist" class="artist">—</div>
</div>
</div>

<div class="socials">
<a href="#" title="add me on discord">
<img src="discord.webp" alt="discord">
</a>

<a href="https://github.com/imt00dizzy" title="see my projects on github">
<img src="github.webp" alt="github">
</a>

<a href="https://sciencerules.xyz" title="sciencerules! free 'educational' games to play at school *wink*">
<img src="sciencerules.png" alt="science">
</a>
</div>

</div>

<div id="site-player">
<img src="jaydes.jpeg">
<div class="meta">
<div class="now">playing on site</div>
<div class="song">go home</div>
<div class="by">jaydes</div>
</div>
<div class="loop-indicator">looped!</div>
<div class="progress-container">
  <div class="progress-bar"></div>
</div>
</div>

<div class="playback-controls">
<button class="control-btn" id="prev-btn" title="Restart song (R)">
  <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
    <path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"/>
  </svg>
</button>
<button class="control-btn" id="play-pause-btn" title="Play/Pause (Space)">
  <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" id="play-icon">
    <path d="M8 5v14l11-7z"/>
  </svg>
  <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" id="pause-icon" style="display: none;">
    <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>
  </svg>
</button>
<button class="control-btn active" id="loop-btn" title="Loop enabled (L)">
  <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
    <path d="M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"/>
  </svg>
</button>
</div>

<div class="volume-container">
<svg class="volume-icon" viewBox="0 0 24 24" fill="currentColor">
<path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/>
</svg>
<input type="range" class="volume-slider" min="0" max="100" value="50">
</div>

<script>
// Tab title typewriter effect
class TabTitleTypewriter {
  constructor() {
    this.titles = [
      "✦ @dizzy",
      "♪ go home by jaydes",
      "♬ playing on site",
      "✧ sciencerules.xyz",
      "✦ listening to music",
      "♪ last.fm: imt00dizzy",
      "✧ welcome"
    ];
    this.currentTitleIndex = 0;
    this.currentCharIndex = 0;
    this.isDeleting = false;
    this.isWaiting = false;
    this.waitTime = 1500; // Time to wait between phrases
    this.typeSpeed = 80; // Speed of typing
    this.deleteSpeed = 50; // Speed of deleting
    
    // Store original title for when tab is not active
    this.originalTitle = document.title;
    
    this.init();
  }
  
  init() {
    // Start the typewriter effect
    this.type();
    
    // Handle tab visibility changes
    document.addEventListener('visibilitychange', () => {
      if (document.hidden) {
        // When tab is hidden, show static title
        document.title = this.originalTitle;
      } else {
        // When tab becomes visible again, resume typewriter
        this.type();
      }
    });
  }
  
  type() {
    if (document.hidden) return;
    
    const currentTitle = this.titles[this.currentTitleIndex];
    
    if (this.isWaiting) {
      // Wait before starting next phrase
      setTimeout(() => {
        this.isWaiting = false;
        this.isDeleting = true;
        this.type();
      }, this.waitTime);
      return;
    }
    
    if (this.isDeleting) {
      // Delete characters
      document.title = currentTitle.substring(0, this.currentCharIndex - 1);
      this.currentCharIndex--;
      
      if (this.currentCharIndex === 0) {
        this.isDeleting = false;
        this.currentTitleIndex = (this.currentTitleIndex + 1) % this.titles.length;
        this.isWaiting = true;
      }
      
      setTimeout(() => this.type(), this.deleteSpeed);
    } else {
      // Type characters
      document.title = currentTitle.substring(0, this.currentCharIndex + 1);
      this.currentCharIndex++;
      
      if (this.currentCharIndex === currentTitle.length) {
        this.isWaiting = true;
      }
      
      setTimeout(() => this.type(), this.typeSpeed);
    }
  }
}

// Elements
const enter = document.getElementById("enter-screen");
const audio = document.getElementById("site-audio");
const particlesContainer = document.getElementById("particles");
const volumeSlider = document.querySelector('.volume-slider');
const progressBar = document.querySelector('.progress-bar');
const loopIndicator = document.querySelector('.loop-indicator');
const playPauseBtn = document.getElementById('play-pause-btn');
const loopBtn = document.getElementById('loop-btn');
const prevBtn = document.getElementById('prev-btn');
const playIcon = document.getElementById('play-icon');
const pauseIcon = document.getElementById('pause-icon');

// Audio initialization
audio.volume = 0.5;
audio.loop = true; // Ensure looping is enabled

// Start typewriter effect
new TabTitleTypewriter();

// Enter site
enter.onclick = async() => {
  try {
    await audio.play();
    enter.classList.add("hidden");
    localStorage.setItem('siteEntered', 'true');
    updatePlayPauseIcon();
  } catch(err) {
    console.log("Audio play failed:", err);
    enter.classList.add("hidden");
  }
}

// Check if user already entered
if (localStorage.getItem('siteEntered') === 'true') {
  enter.classList.add("hidden");
  audio.play().then(() => {
    updatePlayPauseIcon();
  }).catch(() => {
    // Auto-play might fail without user interaction
  });
}

// Volume control
volumeSlider.addEventListener('input', (e) => {
  audio.volume = e.target.value / 100;
});

// Update progress bar
function updateProgressBar() {
  if (audio.duration) {
    const progress = (audio.currentTime / audio.duration) * 100;
    progressBar.style.width = `${progress}%`;
  }
}

// Show loop indicator when song loops
audio.addEventListener('timeupdate', updateProgressBar);

audio.addEventListener('ended', () => {
  // This event won't fire when loop=true, but just in case
  if (audio.loop) {
    showLoopIndicator();
  }
});

// Detect when audio loops by checking if it jumps back to start
let lastTime = 0;
audio.addEventListener('timeupdate', () => {
  if (audio.currentTime < lastTime && audio.loop) {
    showLoopIndicator();
  }
  lastTime = audio.currentTime;
});

function showLoopIndicator() {
  loopIndicator.classList.add('show');
  setTimeout(() => {
    loopIndicator.classList.remove('show');
  }, 500);
}

// Play/Pause button
playPauseBtn.addEventListener('click', () => {
  if (audio.paused) {
    audio.play();
  } else {
    audio.pause();
  }
  updatePlayPauseIcon();
});

function updatePlayPauseIcon() {
  if (audio.paused) {
    playIcon.style.display = 'block';
    pauseIcon.style.display = 'none';
  } else {
    playIcon.style.display = 'none';
    pauseIcon.style.display = 'block';
  }
}

// Loop button
loopBtn.addEventListener('click', () => {
  audio.loop = !audio.loop;
  loopBtn.classList.toggle('active', audio.loop);
  loopBtn.title = audio.loop ? 'Loop enabled (L)' : 'Loop disabled (L)';
  
  // Show feedback
  const feedback = document.createElement('div');
  feedback.textContent = audio.loop ? 'Loop: ON' : 'Loop: OFF';
  feedback.style.cssText = `
    position: fixed;
    top: 20px;
    right: 20px;
    background: ${audio.loop ? 'var(--primary)' : 'var(--border)'};
    color: white;
    padding: 8px 12px;
    border-radius: 8px;
    font-size: 12px;
    z-index: 9999;
    animation: fadeOut 2s forwards;
  `;
  document.body.appendChild(feedback);
  setTimeout(() => feedback.remove(), 2000);
});

// Restart button
prevBtn.addEventListener('click', () => {
  audio.currentTime = 0;
  if (audio.paused) {
    audio.play();
    updatePlayPauseIcon();
  }
});

// Last.fm integration
const user = "imt00dizzy"
const key = "e2e7ca68b80856cf1e57b3d891717f71"

const lfmArt = document.getElementById("lfm-art")
const lfmTitle = document.getElementById("lfm-title")
const lfmArtist = document.getElementById("lfm-artist")
const lfmLabel = document.getElementById("lfm-label")
const lfmBox = document.getElementById("lastfm")

async function updateLastfm() {
  try {
    const r = await fetch(`https://ws.audioscrobbler.com/2.0/?method=user.getrecenttracks&user=${user}&api_key=${key}&format=json&limit=1`)
    const d = await r.json()
    const t = d.recenttracks?.track?.[0]
    
    if (t) {
      lfmTitle.textContent = t.name || "—"
      lfmArtist.textContent = t.artist?.["#text"] || "—"
      lfmArt.src = t.image?.[2]?.["#text"] || "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='56' height='56' viewBox='0 0 56 56'%3E%3Crect width='56' height='56' fill='%232b2740'/%3E%3C/svg%3E"
      lfmLabel.textContent = t["@attr"]?.nowplaying ? "now playing" : "last listened to"
      lfmBox.onclick = () => window.open(t.url, "_blank")
      lfmBox.classList.remove("loading")
    }
  } catch(err) {
    console.log("Last.fm fetch error:", err)
    lfmLabel.textContent = "offline"
    lfmLabel.classList.remove("pulse")
  }
}

// Initialize Last.fm
updateLastfm()
setInterval(updateLastfm, 15000)

// Particle System
class Particle {
  constructor(canvas) {
    this.canvas = canvas;
    this.ctx = canvas.getContext('2d');
    this.x = Math.random() * canvas.width;
    this.y = Math.random() * canvas.height;
    this.size = Math.random() * 2 + 0.5;
    this.speedX = Math.random() * 0.5 - 0.25;
    this.speedY = Math.random() * 0.5 - 0.25;
    this.color = `rgba(139, 92, 246, ${Math.random() * 0.3 + 0.1})`;
  }
  
  update() {
    this.x += this.speedX;
    this.y += this.speedY;
    
    if (this.x > this.canvas.width) this.x = 0;
    else if (this.x < 0) this.x = this.canvas.width;
    if (this.y > this.canvas.height) this.y = 0;
    else if (this.y < 0) this.y = this.canvas.height;
  }
  
  draw() {
    this.ctx.fillStyle = this.color;
    this.ctx.beginPath();
    this.ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
    this.ctx.fill();
  }
}

// Initialize particles
function initParticles() {
  const canvas = document.createElement('canvas');
  particlesContainer.appendChild(canvas);
  const ctx = canvas.getContext('2d');
  
  function resizeCanvas() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
  }
  
  resizeCanvas();
  window.addEventListener('resize', resizeCanvas);
  
  const particles = [];
  const particleCount = Math.min(100, Math.floor((window.innerWidth * window.innerHeight) / 10000));
  
  for (let i = 0; i < particleCount; i++) {
    particles.push(new Particle(canvas));
  }
  
  function animate() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    
    // Draw particles behind UI (avoid overlap)
    particles.forEach(particle => {
      particle.update();
      particle.draw();
    });
    
    requestAnimationFrame(animate);
  }
  
  animate();
}

// Initialize everything
document.addEventListener('DOMContentLoaded', () => {
  initParticles();
  
  // Add keyboard shortcuts
  document.addEventListener('keydown', (e) => {
    // Spacebar to play/pause
    if (e.code === 'Space') {
      e.preventDefault();
      if (audio.paused) {
        audio.play();
      } else {
        audio.pause();
      }
      updatePlayPauseIcon();
    }
    // M to mute
    if (e.code === 'KeyM') {
      audio.muted = !audio.muted;
    }
    // L to toggle loop
    if (e.code === 'KeyL') {
      e.preventDefault();
      loopBtn.click();
    }
    // R to restart song
    if (e.code === 'KeyR') {
      e.preventDefault();
      prevBtn.click();
    }
  });
  
  // Player click to play/pause
  document.getElementById('site-player').addEventListener('click', (e) => {
    // Don't trigger if clicking on the progress bar
    if (!e.target.closest('.progress-container')) {
      if (audio.paused) {
        audio.play();
      } else {
        audio.pause();
      }
      updatePlayPauseIcon();
    }
  });
  
  // Update player status
  audio.addEventListener('play', () => {
    document.querySelector('#site-player .now').textContent = 'now playing';
  });
  
  audio.addEventListener('pause', () => {
    document.querySelector('#site-player .now').textContent = 'paused';
  });
  
  // Click progress bar to seek
  document.querySelector('.progress-container').addEventListener('click', (e) => {
    const rect = e.target.getBoundingClientRect();
    const percent = (e.clientX - rect.left) / rect.width;
    audio.currentTime = percent * audio.duration;
  });
});

// Tooltip helper
document.querySelectorAll('[title]').forEach(el => {
  el.addEventListener('mouseenter', (e) => {
    const tooltip = document.createElement('div');
    tooltip.className = 'tooltip';
    tooltip.textContent = e.target.title;
    tooltip.style.cssText = `
      position: fixed;
      background: var(--section-bg);
      color: var(--text);
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      border: 1px solid var(--border);
      z-index: 9999;
      pointer-events: none;
    `;
    document.body.appendChild(tooltip);
    
    const rect = e.target.getBoundingClientRect();
    tooltip.style.left = `${rect.left + rect.width / 2}px`;
    tooltip.style.top = `${rect.top - 30}px`;
    tooltip.style.transform = 'translateX(-50%)';
    
    e.target._tooltip = tooltip;
  });
  
  el.addEventListener('mouseleave', (e) => {
    if (e.target._tooltip) {
      e.target._tooltip.remove();
      delete e.target._tooltip;
    }
  });
});

// Add CSS for fadeOut animation
const style = document.createElement('style');
style.textContent = `
  @keyframes fadeOut {
    0% { opacity: 1; transform: translateY(0); }
    70% { opacity: 1; transform: translateY(0); }
    100% { opacity: 0; transform: translateY(-10px); }
  }
`;
document.head.appendChild(style);
</script>

</body>
</html>